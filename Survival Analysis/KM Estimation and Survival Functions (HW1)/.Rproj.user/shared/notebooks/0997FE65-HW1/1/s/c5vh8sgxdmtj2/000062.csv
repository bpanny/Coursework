"0","# read in WHAS100 data"
"0","library(survival)"
"0","# produce K-M estimate with 95% log-log based CI "
"0","KM.whas6_male <- survfit(Surv(lenfol*365,fstat)~1, data=whas6 %>% filter(sex == 'male'),"
"0","                      conf.int=0.95, error = ""greenwood"", conf.type=""log-log"")"
"0","summary(KM.whas6_male)"
"1","Call: "
"1","survfit(formula = Surv(lenfol * 365, fstat) ~ 1, data = whas6 %>% 
"
"1","    filter(sex == ""male""), error = ""greenwood"", conf.int = 0.95, 
"
"1","    conf.type = ""log-log"")
"
"1","
"
"1",""
"1"," time"
"1"," n.risk"
"1"," n.event"
"1"," survival"
"1"," std.err"
"1"," lower 95% CI"
"1"," upper 95% CI"
"1","
"
"1","  438"
"1","      6"
"1","       1"
"1","    0.833"
"1","   0.152"
"1","      0.27312"
"1","        0.975"
"1","
"
"1"," 1241"
"1","      5"
"1","       1"
"1","    0.667"
"1","   0.192"
"1","      0.19462"
"1","        0.904"
"1","
"
"1"," 1861"
"1","      3"
"1","       1"
"1","    0.444"
"1","   0.222"
"1","      0.06619"
"1","        0.785"
"1","
"
"1"," 2226"
"1","      2"
"1","       1"
"1","    0.222"
"1","   0.192"
"1","      0.00957"
"1","        0.615"
"1","
"
"1"," 2592"
"1","      1"
"1","       1"
"1","    0.000"
"1","     NaN"
"1","           NA"
"1","           NA"
"1","
"
"0","KM.whas6_female <- survfit(Surv(lenfol*365,fstat)~1, data=whas6 %>% filter(sex == 'female'),"
"0","                      conf.int=0.95, error = ""greenwood"", conf.type=""log-log"")"
"0","summary(KM.whas6_female)"
"1","Call: "
"1","survfit(formula = Surv(lenfol * 365, fstat) ~ 1, data = whas6 %>% 
"
"1","    filter(sex == ""female""), error = ""greenwood"", conf.int = 0.95, 
"
"1","    conf.type = ""log-log"")
"
"1","
"
"1",""
"1"," time"
"1"," n.risk"
"1"," n.event"
"1"," survival"
"1"," std.err"
"1"," lower 95% CI"
"1"," upper 95% CI"
"1","
"
"1","  146"
"1","      6"
"1","       1"
"1","    0.833"
"1","   0.152"
"1","      0.27312"
"1","        0.975"
"1","
"
"1","  438"
"1","      5"
"1","       1"
"1","    0.667"
"1","   0.192"
"1","      0.19462"
"1","        0.904"
"1","
"
"1"," 1570"
"1","      4"
"1","       1"
"1","    0.500"
"1","   0.204"
"1","      0.11095"
"1","        0.804"
"1","
"
"1"," 1789"
"1","      3"
"1","       1"
"1","    0.333"
"1","   0.192"
"1","      0.04608"
"1","        0.676"
"1","
"
"1"," 1825"
"1","      2"
"1","       1"
"1","    0.167"
"1","   0.152"
"1","      0.00772"
"1","        0.517"
"1","
"
"0","# plot K-M estimate and its associated CI"
"0","plot(KM.whas6_male, main=""Male Survival following MI hospitalization"", xlab=""days"", ylab=""Survival probability"")"
